namespace :greaterthan do
  desc "TODO"
  task adjust-1: :environment do
  	# Adjust Missing contributions from bucket 743, 766, 810, 919, 934
  	sql = %(INSERT INTO contributions(user_id, bucket_id, created_at, updated_at, amount)
  		VALUES
			(2424,743,'2016-10-27 14:54:27.774602','2016-10-27 14:54:27.774602',25),
			(2477,743,'2016-10-28 12:41:02.946147','2016-10-28 12:41:02.946147',25),
			(2430,743,'2016-10-28 18:24:59.01789 ','2016-10-28 18:24:59.01789 ',50),
			(2420,743,'2016-10-31 07:43:49.99079 ','2016-10-31 07:43:49.99079 ',50),
			(2425,743,'2016-10-31 10:59:57.133428','2016-10-31 10:59:57.133428',100),
			(1201,766,'2016-10-26 17:03:18.895974','2016-10-26 17:03:18.895974',300),
			(2424,766,'2016-10-27 14:57:04.022733','2016-10-27 14:57:04.022733',300),
			(1202,810,'2016-10-26 17:05:15.628292','2016-10-26 17:05:15.628292',40),
			(2420,810,'2016-10-31 07:43:29.422982','2016-10-31 07:43:29.422982',260),
			(2425,810,'2016-10-31 11:35:07.872268','2016-10-31 11:35:07.872268',200),
			(971,919,'2016-12-04 17:15:38.996076','2016-12-04 17:15:38.996076',18),
			(674,919,'2016-12-04 21:45:27.785965','2016-12-04 21:45:27.785965',50),
			(608,919,'2016-12-04 22:04:10.686607','2016-12-04 22:04:10.686607',111),
			(605,919,'2016-12-04 22:18:55.66176 ','2016-12-04 22:18:55.66176 ',25),
			(500,919,'2016-12-04 22:22:11.54124 ','2016-12-04 22:22:11.54124 ',25),
			(584,919,'2016-12-05 00:03:12.124744','2016-12-05 00:03:12.124744',50),
			(644,919,'2016-12-05 00:07:34.289376','2016-12-05 00:07:34.289376',13),
			(469,919,'2016-12-05 00:09:28.994915','2016-12-05 00:09:28.994915',20),
			(226,919,'2016-12-05 01:26:40.0172  ','2016-12-05 01:26:40.0172  ',100),
			(664,919,'2016-12-05 02:14:27.861048','2016-12-05 02:14:27.861048',20),
			(735,919,'2016-12-05 07:53:42.922411','2016-12-05 07:53:42.922411',44),
			(682,919,'2016-12-05 13:49:29.995601','2016-12-05 13:49:29.995601',30),
			(441,919,'2016-12-05 18:33:39.654201','2016-12-05 18:33:39.654201',20),
			(411,919,'2016-12-05 21:34:04.951764','2016-12-05 21:34:04.951764',56),
			(269,919,'2016-12-05 21:44:35.100147','2016-12-05 21:44:35.100147',10),
			(235,919,'2016-12-06 17:52:40.714126','2016-12-06 17:52:40.714126',50),
			(408,919,'2016-12-08 09:35:13.05701 ','2016-12-08 09:35:13.05701 ',5),
			(520,919,'2016-12-09 10:57:35.899012','2016-12-09 10:57:35.899012',40),
			(668,919,'2017-01-14 20:41:18.216609','2017-01-14 20:41:18.216609',63),
			(645,919,'2017-01-17 05:51:18.642054','2017-01-17 05:51:18.642054',39),
			(674,919,'2017-01-17 09:22:35.056821','2017-01-17 09:22:35.056821',11),
			(408,934,'2016-12-08 09:34:41.155263','2016-12-08 09:34:41.155263',10),
			(674,934,'2016-12-08 09:54:41.379338','2016-12-08 09:54:41.379338',20),
			(735,934,'2016-12-08 10:50:25.356014','2016-12-08 10:50:25.356014',100),
			(472,934,'2016-12-09 08:11:23.780827','2016-12-09 08:11:23.780827',2),
			(621,934,'2016-12-09 22:45:51.804683','2016-12-09 22:45:51.804683',10),
			(1158,934,'2016-12-14 14:36:32.433915','2016-12-14 14:36:32.433915',30),
			(735,934,'2017-01-13 20:01:22.592713','2017-01-13 20:01:22.592713',69),
			(410,934,'2017-01-17 22:15:41.803809','2017-01-17 22:15:41.803809',4),
			(674,934,'2017-02-10 02:19:10.842927','2017-02-10 02:19:10.842927',55),
			(2832,934,'2017-02-10 03:18:58.083193','2017-02-10 03:18:58.083193',50),
			(410,934,'2017-02-18 05:20:35.304196','2017-02-18 05:20:35.304196',5),
			(617,934,'2017-02-23 09:46:49.415491','2017-02-23 09:46:49.415491',100),
			(674,934,'2017-02-26 18:17:55.594731','2017-02-26 18:17:55.594731',45);
			)
		ActiveRecord::Base.connection.execute(sql)
		# And remove the fact they've deleted (archived)
		sql = %(UPDATE buckets set archived_at = NULL where id IN (743, 766, 810, 919, 934);)
		ActiveRecord::Base.connection.execute(sql)
		# And finally set them to funded. Since they already have paid_at set, 
		# they will be completed
		sql = %(UPDATE buckets set status = 'funded' where id IN (743, 766, 810, 919, 934);)
		ActiveRecord::Base.connection.execute(sql)
  end
end
